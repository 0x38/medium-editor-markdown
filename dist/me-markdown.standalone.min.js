!function(e){if("function"!=typeof MediumEditor)throw new Error("Medium Editor is not loaded on the page.");var t={decode:function(e,t){t=merge(t,decode.options);var n=t.strict;return n&&regexInvalidEntity.test(e)&&parseError("malformed character reference"),e.replace(regexDecode,function(e,r,a,c,o,i,l,p){var u,s,m,f,d;return r?(u=r,s=a,n&&!s&&parseError("character reference was not terminated by a semicolon"),codePointToSymbol(u,n)):c?(m=c,s=o,n&&!s&&parseError("character reference was not terminated by a semicolon"),u=parseInt(m,16),codePointToSymbol(u,n)):i?(f=i,has(decodeMap,f)?decodeMap[f]:(n&&parseError("named character reference was not terminated by a semicolon"),e)):(f=l,d=p,d&&t.isAttributeValue?(n&&"="==d&&parseError("`&` did not start a character reference"),e):(n&&parseError("named character reference was not terminated by a semicolon"),decodeMapLegacy[f]+(d||"")))})}},n=function(e){function n(e,t){var n="void"===t.type?"<"+t.tag+"\\b([^>]*)\\/?>":"<"+t.tag+"\\b([^>]*)>([\\s\\S]*?)<\\/"+t.tag+">",r=new RegExp(n,"gi"),a="";return a="string"==typeof t.replacement?e.replace(r,t.replacement):e.replace(r,function(e,n,r,a){return t.replacement.call(this,e,n,r,a)})}function r(e){return new RegExp(e+"\\s*=\\s*[\"']?([^\"']*)[\"']?","i")}function a(e){return e=e.replace(/<(ul|ol)\b[^>]*>([\s\S]*?)<\/\1>/gi,function(e,t,n){var r=n.split("</li>");for(r.splice(r.length-1,1),l=0,p=r.length;p>l;l++){if(r[l]){var a="ol"===t?l+1+".  ":"*   ";r[l]=r[l].replace(/\s*<li[^>]*>([\s\S]*)/i,function(e,t){return t=t.replace(/^\s+/,""),t=t.replace(/\n\n/g,"\n\n    "),t=t.replace(/\n([ ]*)+(\*|\d+\.) /g,"\n$1    $2 "),a+t})}r[l]=r[l].replace(/(.) +$/m,"$1")}return r.join("\n")}),"\n\n"+e.replace(/[ \t]+\n|\s+$/g,"")}function c(e){return e=e.replace(/<blockquote\b[^>]*>([\s\S]*?)<\/blockquote>/gi,function(e,t){return t=t.replace(/^\s+|\s+$/g,""),t=o(t),t=t.replace(/^/gm,"> "),t=t.replace(/^(>([ \t]{2,}>)+)/gm,"> >")})}function o(e){return e=e.replace(/^[\t\r\n]+|[\t\r\n]+$/g,""),e=e.replace(/\n\s+\n/g,"\n\n"),e=e.replace(/\n{3,}/g,"\n\n")}for(var i=[{patterns:"p",replacement:function(e,t,n){return n?"\n\n"+n+"\n":""}},{patterns:"br",type:"void",replacement:"  \n"},{patterns:"h([1-6])",replacement:function(e,t,n,r){for(var a="",c=0;t>c;c++)a+="#";return"\n\n"+a+" "+r+"\n"}},{patterns:"hr",type:"void",replacement:"\n\n* * *\n"},{patterns:"a",replacement:function(e,t,n){var a=t.match(r("href")),c=t.match(r("title"));return a?"["+n+"]("+a[1]+(c&&c[1]?' "'+c[1]+'"':"")+")":e}},{patterns:["b","strong"],replacement:function(e,t,n){return n?"**"+n+"**":""}},{patterns:["i","em"],replacement:function(e,t,n){return n?"_"+n+"_":""}},{patterns:"code",replacement:function(e,n,r){return r?"`"+t.decode(r)+"`":""}},{patterns:"img",type:"void",replacement:function(e,t){var n=t.match(r("src")),a=t.match(r("alt")),c=t.match(r("title"));return n?"!["+(a&&a[1]?a[1]:"")+"]("+n[1]+(c&&c[1]?' "'+c[1]+'"':"")+")":""}}],l=0,p=i.length;p>l;l++)if("string"==typeof i[l].patterns)e=n(e,{tag:i[l].patterns,replacement:i[l].replacement,type:i[l].type});else for(var u=0,s=i[l].patterns.length;s>u;u++)e=n(e,{tag:i[l].patterns[u],replacement:i[l].replacement,type:i[l].type});e=e.replace(/<pre\b[^>]*>`([\s\S]*?)`<\/pre>/gi,function(e,n){var r=t.decode(n);return r=r.replace(/^\t+/g,"  "),r=r.replace(/\n/g,"\n    "),"\n\n    "+r+"\n"}),e=e.replace(/^(\s{0,3}\d+)\. /g,"$1\\. ");for(var m=/<(ul|ol)\b[^>]*>(?:(?!<ul|<ol)[\s\S])*?<\/\1>/gi;e.match(m);)e=e.replace(m,function(e){return a(e)});for(var f=/<blockquote\b[^>]*>((?:(?!<blockquote)[\s\S])*?)<\/blockquote>/gi;e.match(f);)e=e.replace(f,function(e){return c(e)});return o(e)},r=function(e,t){var r=this;"function"==typeof e&&(t=e,e={}),e=Object(e),e.events=e.events||["input","change"],t=t||e.callback||function(){},setTimeout(function(){function a(){t(n(r.element.innerHTML).split("\n").map(function(e){return e.trim()}).join("\n").trim())}r.element=e.element||"[data-medium-element=true]","string"==typeof r.element&&(r.element=document.querySelector(r.element)),r.element=r.element||e.selector,e.events.forEach(function(e){r.element.addEventListener(e,a)}),a()},0)};e.MeMarkdown=r}(this);